version: 1.0
runtime: java
build:
  commands:
    build:
      - echo "Building Spring Boot application (Java 21)"
      - mvn -DskipTests clean package
run:
  runtime-version: 21
  command: java $JAVA_TOOL_OPTIONS -jar target/*.jar
  network:
    port: 8080
  env:
    - name: PORT
      value: "8080"
    - name: SPRING_PROFILES_ACTIVE
      value: "prod"        # cambia a dev si usas ese perfil
    - name: JAVA_TOOL_OPTIONS
      value: "-XX:MaxRAMPercentage=75 -XX:+UseG1GC"